package com.nagp.orderDetails.service.impl;

import javax.annotation.Resource;

import org.springframework.context.annotation.Bean;
import org.springframework.core.ParameterizedTypeReference;
import org.springframework.http.HttpMethod;
import org.springframework.http.ResponseEntity;
import org.springframework.stereotype.Service;
import org.springframework.web.client.RestTemplate;
import org.springframework.web.util.UriComponentsBuilder;

import com.nagp.orderDetails.dto.OrderDetailsDto;
import com.nagp.orderDetails.dto.Response;
import com.nagp.orderDetails.dto.UserDto;
import com.nagp.orderDetails.service.OrderDetailsService;

@Service
public class OrderDetailsServiceImpl implements OrderDetailsService {

	
	@Bean
	public RestTemplate restTemplate() {
		return new RestTemplate();
	}
	

	@Resource
	private RestTemplate restTemplate;
	
	@Override
	public Response<OrderDetailsDto> getUserOrderDetails(String userId) {
		
		String baseUrl = "localhost:8060/user/1";
		RestTemplate restTemplate = new RestTemplate();
		ResponseEntity<Response<UserDto>> responseEntity = null;
		
			UriComponentsBuilder builder = UriComponentsBuilder.fromUriString(baseUrl);
//					.queryParam("orderId", orderId)
//					.queryParam("orderStatus", orderStatus);
					
//			responseEntity = restTemplate.exchange(builder.buildAndExpand().toUri(), HttpMethod.GET, null,
//					new ParameterizedTypeReference<Response<String>>() {});
//			
//			Response<String> orderResponse = responseEntity.getBody();

			responseEntity = restTemplate.exchange(builder.buildAndExpand().toUri(), HttpMethod.GET, null,new ParameterizedTypeReference<Response<UserDto>>() {});
			response = responseEntity.getBody();
		
		
		return null;
	}

}
